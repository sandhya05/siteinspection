(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ng2-simple-smooth-scroll', ['exports', '@angular/core', '@angular/common'], factory) :
    (factory((global['ng2-simple-smooth-scroll'] = {}),global.ng.core,global.ng.common));
}(this, (function (exports,i0,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SimpleSmoothScrollOption = /** @class */ (function () {
        function SimpleSmoothScrollOption(option) {
            /**
             * EasingFunctions - from https://gist.github.com/gre/1650294
             */
            this.EasingFunctions = {
                // no easing, no acceleration
                linear: function (t) { return t; },
                // accelerating from zero velocity
                easeInQuad: function (t) { return t * t; },
                // decelerating to zero velocity
                easeOutQuad: function (t) { return t * (2 - t); },
                // acceleration until halfway, then deceleration
                easeInOutQuad: function (t) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; },
                // accelerating from zero velocity
                easeInCubic: function (t) { return t * t * t; },
                // decelerating to zero velocity
                easeOutCubic: function (t) { return (--t) * t * t + 1; },
                // acceleration until halfway, then deceleration
                easeInOutCubic: function (t) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; },
                // accelerating from zero velocity
                easeInQuart: function (t) { return t * t * t * t; },
                // decelerating to zero velocity
                easeOutQuart: function (t) { return 1 - (--t) * t * t * t; },
                // acceleration until halfway, then deceleration
                easeInOutQuart: function (t) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t; },
                // accelerating from zero velocity
                easeInQuint: function (t) { return t * t * t * t * t; },
                // decelerating to zero velocity
                easeOutQuint: function (t) { return 1 + (--t) * t * t * t * t; },
                // acceleration until halfway, then deceleration
                easeInOutQuint: function (t) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; }
            };
            this.duration = option.duration || 800;
            this.offset = option.offset || 0;
            this.easing = this.EasingFunctions[option.easing] || this.EasingFunctions['easeInOutQuad'];
        }
        return SimpleSmoothScrollOption;
    }());
    var SimpleSmoothScrollService = /** @class */ (function () {
        function SimpleSmoothScrollService(platformId) {
            this.platformId = platformId;
        }
        /**
         * @param {?} height
         * @param {?} opt
         * @return {?}
         */
        SimpleSmoothScrollService.prototype.smoothScroll = /**
         * @param {?} height
         * @param {?} opt
         * @return {?}
         */
            function (height, opt) {
                if (common.isPlatformBrowser(this.platformId)) {
                    /** @type {?} */
                    var option_1 = new SimpleSmoothScrollOption(opt);
                    /** @type {?} */
                    var duration = option_1.duration;
                    /** @type {?} */
                    var doc = document.documentElement;
                    /** @type {?} */
                    var begin_1 = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
                    /** @type {?} */
                    var t = 10;
                    /** @type {?} */
                    var tick_1 = 1 / (duration / t);
                    height += option_1.offset;
                    /** @type {?} */
                    var distance_1 = height - begin_1;
                    if (distance_1 == 0)
                        return;
                    /** @type {?} */
                    var time_1 = 0;
                    /** @type {?} */
                    var y_1 = void 0;
                    /** @type {?} */
                    var current_1 = void 0;
                    /** @type {?} */
                    var s_1 = setInterval(function () {
                        y_1 = option_1.easing(time_1);
                        current_1 = y_1 * distance_1 + begin_1;
                        if (current_1 >= height && distance_1 > 0) {
                            current_1 = height;
                            clearInterval(s_1);
                        }
                        if (current_1 < height + tick_1 && distance_1 < 0) {
                            current_1 = height;
                            clearInterval(s_1);
                        }
                        if (current_1 < 0 && distance_1 < 0) {
                            current_1 = 0;
                            clearInterval(s_1);
                        }
                        window.scrollTo(0, current_1);
                        time_1 += tick_1;
                    }, t);
                }
            };
        /**
         * @param {?=} opt
         * @return {?}
         */
        SimpleSmoothScrollService.prototype.smoothScrollToTop = /**
         * @param {?=} opt
         * @return {?}
         */
            function (opt) {
                if (opt === void 0) {
                    opt = {};
                }
                this.smoothScroll(0, opt);
            };
        /**
         * @param {?=} opt
         * @return {?}
         */
        SimpleSmoothScrollService.prototype.smoothScrollToAnchor = /**
         * @param {?=} opt
         * @return {?}
         */
            function (opt) {
                if (opt === void 0) {
                    opt = {};
                }
                if (common.isPlatformBrowser(this.platformId)) {
                    /** @type {?} */
                    var eid = window.location.hash;
                    if (eid)
                        eid = eid.replace('#', '');
                    /** @type {?} */
                    var target = document.getElementById(eid);
                    if (target)
                        this.smoothScroll(target.offsetTop, opt);
                }
            };
        SimpleSmoothScrollService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] }
        ];
        /** @nocollapse */
        SimpleSmoothScrollService.ctorParameters = function () {
            return [
                { type: Object, decorators: [{ type: i0.Inject, args: [i0.PLATFORM_ID,] }] }
            ];
        };
        /** @nocollapse */ SimpleSmoothScrollService.ngInjectableDef = i0.defineInjectable({ factory: function SimpleSmoothScrollService_Factory() { return new SimpleSmoothScrollService(i0.inject(i0.PLATFORM_ID)); }, token: SimpleSmoothScrollService, providedIn: "root" });
        return SimpleSmoothScrollService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SimpleSmoothScrollDirective = /** @class */ (function () {
        function SimpleSmoothScrollDirective(el, smooth, platformId) {
            this.el = el;
            this.smooth = smooth;
            this.platformId = platformId;
        }
        /**
         * @return {?}
         */
        SimpleSmoothScrollDirective.prototype.onClick = /**
         * @return {?}
         */
            function () {
                if (common.isPlatformBrowser(this.platformId)) {
                    /** @type {?} */
                    var eid = this.el.nativeElement.hash;
                    if (eid) {
                        if (this.showHash) {
                            // Change URL hash without page jump
                            history.pushState(null, null, eid);
                        }
                        eid = eid.replace('#', '');
                    }
                    /** @type {?} */
                    var target = document.getElementById(eid) || document.getElementById(this.scrollTo);
                    if (target)
                        this.smooth.smoothScroll(target.offsetTop, { duration: this.duration, easing: this.easing, offset: this.offset });
                    return false;
                }
            };
        SimpleSmoothScrollDirective.decorators = [
            { type: i0.Directive, args: [{
                        selector: '[SimpleSmoothScroll]'
                    },] }
        ];
        /** @nocollapse */
        SimpleSmoothScrollDirective.ctorParameters = function () {
            return [
                { type: i0.ElementRef },
                { type: SimpleSmoothScrollService },
                { type: Object, decorators: [{ type: i0.Inject, args: [i0.PLATFORM_ID,] }] }
            ];
        };
        SimpleSmoothScrollDirective.propDecorators = {
            scrollTo: [{ type: i0.Input, args: ['scrollTo',] }],
            duration: [{ type: i0.Input, args: ['duration',] }],
            offset: [{ type: i0.Input, args: ['offset',] }],
            easing: [{ type: i0.Input, args: ['easing',] }],
            showHash: [{ type: i0.Input, args: ['showHash',] }],
            onClick: [{ type: i0.HostListener, args: ['click',] }]
        };
        return SimpleSmoothScrollDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SimpleSmoothScrollModule = /** @class */ (function () {
        function SimpleSmoothScrollModule() {
        }
        SimpleSmoothScrollModule.decorators = [
            { type: i0.NgModule, args: [{
                        declarations: [SimpleSmoothScrollDirective],
                        providers: [SimpleSmoothScrollService],
                        exports: [SimpleSmoothScrollDirective]
                    },] }
        ];
        return SimpleSmoothScrollModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.SimpleSmoothScrollOption = SimpleSmoothScrollOption;
    exports.SimpleSmoothScrollService = SimpleSmoothScrollService;
    exports.SimpleSmoothScrollDirective = SimpleSmoothScrollDirective;
    exports.SimpleSmoothScrollModule = SimpleSmoothScrollModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmcyLXNpbXBsZS1zbW9vdGgtc2Nyb2xsLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmcyLXNpbXBsZS1zbW9vdGgtc2Nyb2xsL2xpYi9uZzItc2ltcGxlLXNtb290aC1zY3JvbGwuc2VydmljZS50cyIsIm5nOi8vbmcyLXNpbXBsZS1zbW9vdGgtc2Nyb2xsL2xpYi9uZzItc2ltcGxlLXNtb290aC1zY3JvbGwuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZzItc2ltcGxlLXNtb290aC1zY3JvbGwvbGliL25nMi1zaW1wbGUtc21vb3RoLXNjcm9sbC5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBQTEFURk9STV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTaW1wbGVTbW9vdGhTY3JvbGxPcHRpb24ge1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgZWFzaW5nPzogJ2xpbmVhcicgfCAnZWFzZUluUXVhZCcgfCAnZWFzZU91dFF1YWQnIHwgJ2Vhc2VJbk91dFF1YWQnIHwgJ2Vhc2VJbkN1YmljJyB8ICdlYXNlT3V0Q3ViaWMnIHwgJ2Vhc2VJbk91dEN1YmljJyB8ICdlYXNlSW5RdWFydCcgfCAnZWFzZU91dFF1YXJ0JyB8ICdlYXNlSW5PdXRRdWFydCcgfCAnZWFzZUluUXVpbnQnIHwgJ2Vhc2VPdXRRdWludCcgfCAnZWFzZUluT3V0UXVpbnQnO1xuICBvZmZzZXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVTbW9vdGhTY3JvbGxPcHRpb24ge1xuICBwdWJsaWMgZHVyYXRpb246IG51bWJlcjtcbiAgcHVibGljIGVhc2luZzogYW55O1xuICBwdWJsaWMgb2Zmc2V0OiBhbnk7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uOiBJU2ltcGxlU21vb3RoU2Nyb2xsT3B0aW9uKSB7XG4gICAgdGhpcy5kdXJhdGlvbiA9IG9wdGlvbi5kdXJhdGlvbiB8fCA4MDA7XG4gICAgdGhpcy5vZmZzZXQgPSBvcHRpb24ub2Zmc2V0IHx8IDA7XG4gICAgdGhpcy5lYXNpbmcgPSB0aGlzLkVhc2luZ0Z1bmN0aW9uc1tvcHRpb24uZWFzaW5nXSB8fCB0aGlzLkVhc2luZ0Z1bmN0aW9uc1snZWFzZUluT3V0UXVhZCddO1xuICB9XG5cbiAgLyoqXG4gICAqIEVhc2luZ0Z1bmN0aW9ucyAtIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ3JlLzE2NTAyOTRcbiAgICovXG4gIHByaXZhdGUgRWFzaW5nRnVuY3Rpb25zID0ge1xuICAgIC8vIG5vIGVhc2luZywgbm8gYWNjZWxlcmF0aW9uXG4gICAgbGluZWFyOiAodCkgPT4geyByZXR1cm4gdCB9LFxuICAgIC8vIGFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbiAgICBlYXNlSW5RdWFkOiAodCkgPT4geyByZXR1cm4gdCAqIHQgfSxcbiAgICAvLyBkZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxuICAgIGVhc2VPdXRRdWFkOiAodCkgPT4geyByZXR1cm4gdCAqICgyIC0gdCkgfSxcbiAgICAvLyBhY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb25cbiAgICBlYXNlSW5PdXRRdWFkOiAodCkgPT4geyByZXR1cm4gdCA8IC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHQgfSxcbiAgICAvLyBhY2NlbGVyYXRpbmcgZnJvbSB6ZXJvIHZlbG9jaXR5IFxuICAgIGVhc2VJbkN1YmljOiAodCkgPT4geyByZXR1cm4gdCAqIHQgKiB0IH0sXG4gICAgLy8gZGVjZWxlcmF0aW5nIHRvIHplcm8gdmVsb2NpdHkgXG4gICAgZWFzZU91dEN1YmljOiAodCkgPT4geyByZXR1cm4gKC0tdCkgKiB0ICogdCArIDEgfSxcbiAgICAvLyBhY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb24gXG4gICAgZWFzZUluT3V0Q3ViaWM6ICh0KSA9PiB7IHJldHVybiB0IDwgLjUgPyA0ICogdCAqIHQgKiB0IDogKHQgLSAxKSAqICgyICogdCAtIDIpICogKDIgKiB0IC0gMikgKyAxIH0sXG4gICAgLy8gYWNjZWxlcmF0aW5nIGZyb20gemVybyB2ZWxvY2l0eSBcbiAgICBlYXNlSW5RdWFydDogKHQpID0+IHsgcmV0dXJuIHQgKiB0ICogdCAqIHQgfSxcbiAgICAvLyBkZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eSBcbiAgICBlYXNlT3V0UXVhcnQ6ICh0KSA9PiB7IHJldHVybiAxIC0gKC0tdCkgKiB0ICogdCAqIHQgfSxcbiAgICAvLyBhY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb25cbiAgICBlYXNlSW5PdXRRdWFydDogKHQpID0+IHsgcmV0dXJuIHQgPCAuNSA/IDggKiB0ICogdCAqIHQgKiB0IDogMSAtIDggKiAoLS10KSAqIHQgKiB0ICogdCB9LFxuICAgIC8vIGFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbiAgICBlYXNlSW5RdWludDogKHQpID0+IHsgcmV0dXJuIHQgKiB0ICogdCAqIHQgKiB0IH0sXG4gICAgLy8gZGVjZWxlcmF0aW5nIHRvIHplcm8gdmVsb2NpdHlcbiAgICBlYXNlT3V0UXVpbnQ6ICh0KSA9PiB7IHJldHVybiAxICsgKC0tdCkgKiB0ICogdCAqIHQgKiB0IH0sXG4gICAgLy8gYWNjZWxlcmF0aW9uIHVudGlsIGhhbGZ3YXksIHRoZW4gZGVjZWxlcmF0aW9uIFxuICAgIGVhc2VJbk91dFF1aW50OiAodCkgPT4geyByZXR1cm4gdCA8IC41ID8gMTYgKiB0ICogdCAqIHQgKiB0ICogdCA6IDEgKyAxNiAqICgtLXQpICogdCAqIHQgKiB0ICogdCB9XG4gIH1cbn1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgU2ltcGxlU21vb3RoU2Nyb2xsU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QpIHsgfVxuXG4gIHB1YmxpYyBzbW9vdGhTY3JvbGwoaGVpZ2h0OiBudW1iZXIsIG9wdDogSVNpbXBsZVNtb290aFNjcm9sbE9wdGlvbikge1xuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSBuZXcgU2ltcGxlU21vb3RoU2Nyb2xsT3B0aW9uKG9wdCk7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG9wdGlvbi5kdXJhdGlvbjtcbiAgICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGNvbnN0IGJlZ2luID0gKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2Muc2Nyb2xsVG9wKSAtIChkb2MuY2xpZW50VG9wIHx8IDApO1xuICAgICAgY29uc3QgdCA9IDEwO1xuICAgICAgY29uc3QgdGljayA9IDEgLyAoZHVyYXRpb24gLyB0KTtcbiAgICAgIGhlaWdodCArPSBvcHRpb24ub2Zmc2V0O1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBoZWlnaHQgLSBiZWdpbjtcbiAgICAgIGlmIChkaXN0YW5jZSA9PSAwKSByZXR1cm47XG4gICAgICBsZXQgdGltZSA9IDA7XG4gICAgICBsZXQgeSwgY3VycmVudDtcbiAgICAgIGxldCBzID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICB5ID0gb3B0aW9uLmVhc2luZyh0aW1lKTtcbiAgICAgICAgY3VycmVudCA9IHkgKiBkaXN0YW5jZSArIGJlZ2luO1xuICAgICAgICBpZiAoY3VycmVudCA+PSBoZWlnaHQgJiYgZGlzdGFuY2UgPiAwKSB7XG4gICAgICAgICAgY3VycmVudCA9IGhlaWdodDtcbiAgICAgICAgICBjbGVhckludGVydmFsKHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50IDwgaGVpZ2h0ICsgdGljayAmJiBkaXN0YW5jZSA8IDApIHtcbiAgICAgICAgICBjdXJyZW50ID0gaGVpZ2h0O1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnQgPCAwICYmIGRpc3RhbmNlIDwgMCkge1xuICAgICAgICAgIGN1cnJlbnQgPSAwO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocyk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnQpO1xuICAgICAgICB0aW1lICs9IHRpY2s7XG4gICAgICB9LCB0KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc21vb3RoU2Nyb2xsVG9Ub3Aob3B0OiBJU2ltcGxlU21vb3RoU2Nyb2xsT3B0aW9uID0ge30pIHtcbiAgICB0aGlzLnNtb290aFNjcm9sbCgwLCBvcHQpO1xuICB9XG5cbiAgcHVibGljIHNtb290aFNjcm9sbFRvQW5jaG9yKG9wdDogSVNpbXBsZVNtb290aFNjcm9sbE9wdGlvbiA9IHt9KSB7XG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgIGxldCBlaWQgPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgICAgIGlmIChlaWQpXG4gICAgICAgIGVpZCA9IGVpZC5yZXBsYWNlKCcjJywgJycpO1xuICAgICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVpZCk7XG4gICAgICBpZiAodGFyZ2V0KVxuICAgICAgICB0aGlzLnNtb290aFNjcm9sbCh0YXJnZXQub2Zmc2V0VG9wLCBvcHQpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciwgSW5qZWN0LCBQTEFURk9STV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgU2ltcGxlU21vb3RoU2Nyb2xsU2VydmljZSB9IGZyb20gJy4vbmcyLXNpbXBsZS1zbW9vdGgtc2Nyb2xsLnNlcnZpY2UnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbU2ltcGxlU21vb3RoU2Nyb2xsXSdcbn0pXG5leHBvcnQgY2xhc3MgU2ltcGxlU21vb3RoU2Nyb2xsRGlyZWN0aXZlIHtcbiAgQElucHV0KCdzY3JvbGxUbycpIHByaXZhdGUgc2Nyb2xsVG86IHN0cmluZztcbiAgQElucHV0KCdkdXJhdGlvbicpIHByaXZhdGUgZHVyYXRpb246IG51bWJlcjtcbiAgQElucHV0KCdvZmZzZXQnKSBwcml2YXRlIG9mZnNldDogbnVtYmVyO1xuICBASW5wdXQoJ2Vhc2luZycpIHByaXZhdGUgZWFzaW5nOiAnbGluZWFyJyB8ICdlYXNlSW5RdWFkJyB8ICdlYXNlT3V0UXVhZCcgfCAnZWFzZUluT3V0UXVhZCcgfCAnZWFzZUluQ3ViaWMnIHwgJ2Vhc2VPdXRDdWJpYycgfCAnZWFzZUluT3V0Q3ViaWMnIHwgJ2Vhc2VJblF1YXJ0JyB8ICdlYXNlT3V0UXVhcnQnIHwgJ2Vhc2VJbk91dFF1YXJ0JyB8ICdlYXNlSW5RdWludCcgfCAnZWFzZU91dFF1aW50JyB8ICdlYXNlSW5PdXRRdWludCc7XG4gIEBJbnB1dCgnc2hvd0hhc2gnKSBwcml2YXRlIHNob3dIYXNoOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBzbW9vdGg6IFNpbXBsZVNtb290aFNjcm9sbFNlcnZpY2UsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QsXG4gICkgeyB9XG5cbiAgQEhvc3RMaXN0ZW5lcignY2xpY2snKSBvbkNsaWNrKCkge1xuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICBsZXQgZWlkID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50Lmhhc2g7XG4gICAgICBpZiAoZWlkKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3dIYXNoKSB7XG4gICAgICAgICAgLy8gQ2hhbmdlIFVSTCBoYXNoIHdpdGhvdXQgcGFnZSBqdW1wXG4gICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgZWlkKTtcbiAgICAgICAgfVxuICAgICAgICBlaWQgPSBlaWQucmVwbGFjZSgnIycsICcnKTtcbiAgICAgIH1cbiAgICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlaWQpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2Nyb2xsVG8pO1xuICAgICAgaWYgKHRhcmdldClcbiAgICAgICAgdGhpcy5zbW9vdGguc21vb3RoU2Nyb2xsKHRhcmdldC5vZmZzZXRUb3AsIHsgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sIGVhc2luZzogdGhpcy5lYXNpbmcsIG9mZnNldDogdGhpcy5vZmZzZXQgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU2ltcGxlU21vb3RoU2Nyb2xsU2VydmljZSB9IGZyb20gJy4vbmcyLXNpbXBsZS1zbW9vdGgtc2Nyb2xsLnNlcnZpY2UnO1xuaW1wb3J0IHsgU2ltcGxlU21vb3RoU2Nyb2xsRGlyZWN0aXZlIH0gZnJvbSAnLi9uZzItc2ltcGxlLXNtb290aC1zY3JvbGwuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbU2ltcGxlU21vb3RoU2Nyb2xsRGlyZWN0aXZlXSxcbiAgcHJvdmlkZXJzOiBbU2ltcGxlU21vb3RoU2Nyb2xsU2VydmljZV0sXG4gIGV4cG9ydHM6IFtTaW1wbGVTbW9vdGhTY3JvbGxEaXJlY3RpdmVdXG59KVxuZXhwb3J0IGNsYXNzIFNpbXBsZVNtb290aFNjcm9sbE1vZHVsZSB7IH1cbiJdLCJuYW1lcyI6WyJpc1BsYXRmb3JtQnJvd3NlciIsIkluamVjdGFibGUiLCJJbmplY3QiLCJQTEFURk9STV9JRCIsIkRpcmVjdGl2ZSIsIkVsZW1lbnRSZWYiLCJJbnB1dCIsIkhvc3RMaXN0ZW5lciIsIk5nTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsUUFTQTtRQUtFLGtDQUFZLE1BQWlDOzs7O21DQVNuQjs7Z0JBRXhCLE1BQU0sRUFBRSxVQUFDLENBQUMsSUFBTyxPQUFPLENBQUMsQ0FBQSxFQUFFOztnQkFFM0IsVUFBVSxFQUFFLFVBQUMsQ0FBQyxJQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQSxFQUFFOztnQkFFbkMsV0FBVyxFQUFFLFVBQUMsQ0FBQyxJQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQSxFQUFFOztnQkFFMUMsYUFBYSxFQUFFLFVBQUMsQ0FBQyxJQUFPLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQSxFQUFFOztnQkFFMUUsV0FBVyxFQUFFLFVBQUMsQ0FBQyxJQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsRUFBRTs7Z0JBRXhDLFlBQVksRUFBRSxVQUFDLENBQUMsSUFBTyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUEsRUFBRTs7Z0JBRWpELGNBQWMsRUFBRSxVQUFDLENBQUMsSUFBTyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFB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